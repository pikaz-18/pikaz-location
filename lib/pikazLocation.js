!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.pikazLocation=e():t.pikazLocation=e()}(self,(function(){return t={961:(t,e,o)=>{var n,i=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function i(t,e){if(!n[t]){n[t]={};for(var o=0;o<t.length;o++)n[t][t.charAt(o)]=o}return n[t][e]}var r={compressToBase64:function(t){if(null==t)return"";var o=r._compress(t,6,(function(t){return e.charAt(t)}));switch(o.length%4){default:case 0:return o;case 1:return o+"===";case 2:return o+"==";case 3:return o+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:r._decompress(t.length,32,(function(o){return i(e,t.charAt(o))}))},compressToUTF16:function(e){return null==e?"":r._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:r._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=r.compress(t),o=new Uint8Array(2*e.length),n=0,i=e.length;n<i;n++){var a=e.charCodeAt(n);o[2*n]=a>>>8,o[2*n+1]=a%256}return o},decompressFromUint8Array:function(e){if(null==e)return r.decompress(e);for(var o=new Array(e.length/2),n=0,i=o.length;n<i;n++)o[n]=256*e[2*n]+e[2*n+1];var a=[];return o.forEach((function(e){a.push(t(e))})),r.decompress(a.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":r._compress(t,6,(function(t){return o.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),r._decompress(t.length,32,(function(e){return i(o,t.charAt(e))})))},compress:function(e){return r._compress(e,16,(function(e){return t(e)}))},_compress:function(t,e,o){if(null==t)return"";var n,i,r,a={},c={},s="",u="",l="",p=2,d=3,h=2,f=[],m=0,g=0;for(r=0;r<t.length;r+=1)if(s=t.charAt(r),Object.prototype.hasOwnProperty.call(a,s)||(a[s]=d++,c[s]=!0),u=l+s,Object.prototype.hasOwnProperty.call(a,u))l=u;else{if(Object.prototype.hasOwnProperty.call(c,l)){if(l.charCodeAt(0)<256){for(n=0;n<h;n++)m<<=1,g==e-1?(g=0,f.push(o(m)),m=0):g++;for(i=l.charCodeAt(0),n=0;n<8;n++)m=m<<1|1&i,g==e-1?(g=0,f.push(o(m)),m=0):g++,i>>=1}else{for(i=1,n=0;n<h;n++)m=m<<1|i,g==e-1?(g=0,f.push(o(m)),m=0):g++,i=0;for(i=l.charCodeAt(0),n=0;n<16;n++)m=m<<1|1&i,g==e-1?(g=0,f.push(o(m)),m=0):g++,i>>=1}0==--p&&(p=Math.pow(2,h),h++),delete c[l]}else for(i=a[l],n=0;n<h;n++)m=m<<1|1&i,g==e-1?(g=0,f.push(o(m)),m=0):g++,i>>=1;0==--p&&(p=Math.pow(2,h),h++),a[u]=d++,l=String(s)}if(""!==l){if(Object.prototype.hasOwnProperty.call(c,l)){if(l.charCodeAt(0)<256){for(n=0;n<h;n++)m<<=1,g==e-1?(g=0,f.push(o(m)),m=0):g++;for(i=l.charCodeAt(0),n=0;n<8;n++)m=m<<1|1&i,g==e-1?(g=0,f.push(o(m)),m=0):g++,i>>=1}else{for(i=1,n=0;n<h;n++)m=m<<1|i,g==e-1?(g=0,f.push(o(m)),m=0):g++,i=0;for(i=l.charCodeAt(0),n=0;n<16;n++)m=m<<1|1&i,g==e-1?(g=0,f.push(o(m)),m=0):g++,i>>=1}0==--p&&(p=Math.pow(2,h),h++),delete c[l]}else for(i=a[l],n=0;n<h;n++)m=m<<1|1&i,g==e-1?(g=0,f.push(o(m)),m=0):g++,i>>=1;0==--p&&(p=Math.pow(2,h),h++)}for(i=2,n=0;n<h;n++)m=m<<1|1&i,g==e-1?(g=0,f.push(o(m)),m=0):g++,i>>=1;for(;;){if(m<<=1,g==e-1){f.push(o(m));break}g++}return f.join("")},decompress:function(t){return null==t?"":""==t?null:r._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(e,o,n){var i,r,a,c,s,u,l,p=[],d=4,h=4,f=3,m="",g=[],v={val:n(0),position:o,index:1};for(i=0;i<3;i+=1)p[i]=i;for(a=0,s=Math.pow(2,2),u=1;u!=s;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=o,v.val=n(v.index++)),a|=(c>0?1:0)*u,u<<=1;switch(a){case 0:for(a=0,s=Math.pow(2,8),u=1;u!=s;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=o,v.val=n(v.index++)),a|=(c>0?1:0)*u,u<<=1;l=t(a);break;case 1:for(a=0,s=Math.pow(2,16),u=1;u!=s;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=o,v.val=n(v.index++)),a|=(c>0?1:0)*u,u<<=1;l=t(a);break;case 2:return""}for(p[3]=l,r=l,g.push(l);;){if(v.index>e)return"";for(a=0,s=Math.pow(2,f),u=1;u!=s;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=o,v.val=n(v.index++)),a|=(c>0?1:0)*u,u<<=1;switch(l=a){case 0:for(a=0,s=Math.pow(2,8),u=1;u!=s;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=o,v.val=n(v.index++)),a|=(c>0?1:0)*u,u<<=1;p[h++]=t(a),l=h-1,d--;break;case 1:for(a=0,s=Math.pow(2,16),u=1;u!=s;)c=v.val&v.position,v.position>>=1,0==v.position&&(v.position=o,v.val=n(v.index++)),a|=(c>0?1:0)*u,u<<=1;p[h++]=t(a),l=h-1,d--;break;case 2:return g.join("")}if(0==d&&(d=Math.pow(2,f),f++),p[l])m=p[l];else{if(l!==h)return null;m=r+r.charAt(0)}g.push(m),p[h++]=r+m.charAt(0),r=m,0==--d&&(d=Math.pow(2,f),f++)}}};return r}();void 0===(n=function(){return i}.call(e,o,e,t))||(t.exports=n)},895:t=>{t.exports=function(t,e,o,n){var i=t[0],r=t[1],a=!1;void 0===o&&(o=0),void 0===n&&(n=e.length);for(var c=(n-o)/2,s=0,u=c-1;s<c;u=s++){var l=e[o+2*s+0],p=e[o+2*s+1],d=e[o+2*u+0],h=e[o+2*u+1];p>r!=h>r&&i<(d-l)*(r-p)/(h-p)+l&&(a=!a)}return a}},138:(t,e,o)=>{const n=o(895),{decompressFromEncodedURIComponent:i}=o(961),r={timeout:3e3,enableHighAccuracy:!1},a={province:"",city:"",district:"",code:"",details:{province:{code:"",location:{},name:"",pinyin:""},city:{code:"",location:{},name:"",pinyin:""},district:{code:"",location:{},name:"",pinyin:""}}},c=t=>{const e=JSON.stringify(t);return JSON.parse(e)},s=t=>{const{timeout:e,enableHighAccuracy:o}={...r,...t};return new Promise(((t,n)=>{if(navigator.geolocation){const i=navigator.geolocation.watchPosition((e=>{const{latitude:o,longitude:n}=e.coords;navigator.geolocation.clearWatch(i),t({latitude:o,longitude:n})}),(t=>{switch(navigator.geolocation.clearWatch(i),t.code){case t.PERMISSION_DENIED:n("html5已拒绝定位");break;case t.POSITION_UNAVAILABLE:n("html5位置信息不可用");break;case t.TIMEOUT:n("html5定位超时");break;case t.UNKNOWN_ERROR:n("html5定位未知错误")}}),{enableHighAccuracy:o,timeout:e,maximumAge:0})}else n("浏览器不支持HTML5定位")}))},u=t=>{const{timeout:e,ip:o}={...r,...t};let n="http://www.geoplugin.net/json.gp";return o&&(n+=`?ip=${o}`),Promise.race([new Promise(((t,e)=>{fetch(n).then((t=>t.json())).then((e=>{t({latitude:Number(e.geoplugin_latitude),longitude:Number(e.geoplugin_longitude)})})).catch((()=>{e("ip定位失败")}))})),(t=>new Promise(((e,o)=>{setTimeout((()=>{o("ip定位超时")}),t)})))(e)])},l=({latitude:t,longitude:e,address:o})=>o.find((o=>o.polygon.find((o=>{if(n([e,t],o))return o})))),p=(t,e,o)=>new Promise(((n,r)=>{fetch(`${o}/static/${t}/${e}.json`).then((t=>t.json())).then((t=>{const e=i(t.str),o=JSON.parse(e);n(o)})).catch((t=>{r(t)}))})),d=async({latitude:t,longitude:e})=>{const o={...c(a),latitude:t,longitude:e},n=await p("province",0),i=l({latitude:t,longitude:e,address:n});if(i){o.province=i.name,o.code=i.id,o.details.province={code:i.id,location:i.location,name:i.name,pinyin:i.pinyin};const n=await p("city",i.id),r=l({latitude:t,longitude:e,address:n});if(r){o.city=r.name,o.code=r.id,o.details.city={code:r.id,location:r.location,name:r.name,pinyin:r.pinyin};const n=await p("district",r.id),i=l({latitude:t,longitude:e,address:n});i&&(o.district=i.name,o.code=i.id,o.details.district={code:i.id,location:i.location,name:i.name,pinyin:i.pinyin})}}return o},h=t=>t.map((t=>({code:t.id,name:t.name,pinyin:t.pinyin,location:t.location})));t.exports={getLocation:t=>{const e={...r,...t};return new Promise(((t,o)=>{s(e).then((({latitude:e,longitude:o})=>{d({latitude:e,longitude:o}).then((e=>{t({...e,type:"h5"})}))})).catch((n=>{console.log(n),u(e).then((({latitude:e,longitude:o})=>{d({latitude:e,longitude:o}).then((e=>{t({...e,type:"ip"})}))})).catch((t=>{console.log(t),o(t)}))}))}))},getH5Location:s,getIpLocation:u,getAddress:d,searchList:async t=>{if(!t){const t=await p("province",0);return h(t)}if("0000"===t.toString().slice(2)){const e=await p("city",t);return h(e)}const e=await p("district",t);return h(e)}}}},e={},function o(n){var i=e[n];if(void 0!==i)return i.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,o),r.exports}(138);var t,e}));